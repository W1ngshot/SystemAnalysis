@startuml
title Аутентификация пользователя

actor Пользователь
participant Интерфейс as "UI"
participant Проски as "Reverse Proxy"
participant Keycloak as "Keycloak"

Пользователь -> Интерфейс : Открыть страницу входа
Интерфейс -> Проски : Перенаправить на /auth (страница входа Keycloak)
Проски -> Keycloak : Прокинуть запрос на страницу входа Keycloak
Keycloak -> Проски : Вернуть HTML-форму
Проски -> Интерфейс : Вернуть HTML-форму пользователю
Интерфейс -> Пользователь : Отобразить форму для ввода логина и пароля

Пользователь -> Интерфейс : Ввести логин и пароль
Интерфейс -> Проски : Отправить логин и пароль на /auth
Проски -> Keycloak : Прокинуть логин и пароль для проверки

alt Логин и пароль подходят
    Keycloak -> Проски : Успешная аутентификация (JWT-токен)
    Проски -> Интерфейс : Передать успешный ответ
    Интерфейс -> Пользователь : Показать интерфейс после входа
else Логин и пароль не подходят
    Keycloak -> Проски : Ошибка аутентификации (Сообщение об ошибке)
    Проски -> Интерфейс : Передать ошибку пользователю
    Интерфейс -> Пользователь : Показать сообщение об ошибке (Неверный логин или пароль)
end

@enduml