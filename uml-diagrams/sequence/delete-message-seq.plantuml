@startuml
title Удаление сообщения

actor Пользователь
participant Интерфейс as "UI"
participant Система as "Сервер"
database "База данных"

Пользователь -> Интерфейс: Удалить сообщение
Интерфейс -> Система: DELETE /c/{conversationId}/message/{messageId}
alt Успешная верификация
    Система -> "База данных": Проверить право на удаление
    alt Право подтверждено
        Система -> "База данных": Удалить сообщение
        "База данных" --> Система: Успешное удаление
        Система -> "База данных": Добавить уведомление для пользователей чата
        Система --> Интерфейс: Сообщение удалено
        Интерфейс --> Пользователь: Уведомление об успешном удалении
    else Отказано в доступе
        Система --> Интерфейс: Ошибка: Удаление запрещено
        Интерфейс --> Пользователь: Уведомление об ошибке
    end
else Ошибка
    Система --> Интерфейс: Ошибка: Верификация не удалась
    Интерфейс --> Пользователь: Сообщение об ошибке
end
@enduml