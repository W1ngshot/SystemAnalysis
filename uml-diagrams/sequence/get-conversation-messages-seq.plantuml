@startuml
title Получение сообщений

actor Пользователь
participant Интерфейс as "UI"
participant Система as "Сервер"
database "База данных"

Пользователь -> Интерфейс: Открыть чат
Интерфейс -> Система: GET /c/{conversationId}/messages
alt Успешная аутентификация
    Система -> "База данных": Проверить существование чата
    "База данных" --> Система: Чат найден
    Система -> "База данных": Загрузить сообщения
    "База данных" --> Система: Вернуть сообщения
    alt Сообщения найдены
        Система -> "База данных": Обновить статус сообщений на "прочитано"
        "База данных" --> Система: Успех обновления
        Система --> Интерфейс: Список сообщений
        Интерфейс --> Пользователь: Отображение сообщений
    else Сообщения отсутствуют
        Система --> Интерфейс: Сообщений нет
        Интерфейс --> Пользователь: Чат пуст
    end
else Ошибка
    alt Чат не существует
        Система --> Интерфейс: Ошибка: Чат не найден
    else Внутренняя ошибка сервера
        Система --> Интерфейс: Ошибка: Не удалось загрузить сообщения
    end
    Интерфейс --> Пользователь: Уведомление об ошибке
end
@enduml
